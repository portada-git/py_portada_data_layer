{
  "$id": "https://portadaproject.eu/ship_entry.schema.json",
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "title": "ship_entry",
  "type": "object",
  "properties": {
    "model_version": {
      "type": "string",
      "description": "Modelo de datos usado en una entrada.",
      "pattern": "^boat_fact-\\d{2}.\\d{2}.\\d{2}$",
      "nullable": false
    },
    "publication_name": {
      "type": "string",
      "description": "Nombre identificador del periodico desde donde se ha extraído la entrada.",
      "minLength": 2,
      "maxLength": 2,
      "nullable": false
    },
    "publication_date": {
      "type": "string",
      "description": "Fecha en la que se publicó la noticia de la entrada.",
      "format": "date",
      "nullable": false
    },
    "parsed_text": {
      "type": "string",
      "description": "Es el fragmento texto correspondiente a la entrada extraída publicado en el periodico, fecha y edición indicada.",
      "nullable": false
    },
    "travel_departure_date": {
      "type": "string",
      "description": "Fecha de salida del puerto en formato YYYY-MM-DD.",
      "format": "date",
      "nullable": true
    },
    "travel_arrival_date": {
      "type": "string",
      "description": "Fecha de llegada al puerto en formato YYYY-MM-DD.",
      "format": "date",
      "nullable": true
    },
    "travel_departure_port": {
      "type": "string",
      "description": "Puerto desde el cual salió el barco.",
      "nullable": true,
      "for_cleaning":["accepted_idem"]
    },
    "travel_port_of_call_list": {
      "type": "array",
      "description": "Lista de puertos donde el barco hizo escala.",
      "items": {
        "oneOf":[
          {
            "type": "object",
            "properties": {
              "port_of_call_place": {
                "type": "string",
                "description": "Puerto donde hizo la escala."
              },
              "port_of_call_arrival_date": {
                "type": "string",
                "format":"date",
                "description": "Fecha de llegada al puerto de escala.",
                "nullable":true
              }
            },
            "required": ["port_of_call_place"],
            "additionalProperties": false
          },{
            "type": "string"
          }
        ]
      }
    },
    "ship_type": {
      "type": "string",
      "description": "Tipo de embarcación.",
      "nullable": true,
      "for_cleaning":["accepted_abbreviations"]
    },
    "ship_name": {
      "type": "string",
      "description": "Nombre del barco.",
      "nullable": true
    },
    "ship_tons_capacity": {
      "type": "integer",
      "description": "Capacidad de carga del buque en toneladas. Debido a los posibles errores de transcripción del OCR, este dato se expresará como una cadena de caracteres. Si en la transcrición indicara, por ejemplo que el barco tiene una capacidad de 'B7 t.', en este campo deberá trasladarse el valor B7. Si se omitiera este valor dejaras este valor a null",
      "nullable": true
    },
    "ship_tons_unit": {
      "type": "string",
      "description": "Especifica las unidades en las que está expresado las dimensiones del buque. Normalmente toneladas, simbolizadas por la abreviación 't.'",
      "nullable": true,
      "for_cleaning":["accepted_abbreviations"]
    },
    "ship_flag": {
      "type": "string",
      "description": "País o nacionalidad bajo cuya bandera navega el barco. Ejemplos: 'español', 'americano', 'oriental'",
      "nullable": true,
      "for_cleaning":["accepted_idem"]
    },
    "master_role": {
      "type": "string",
      "description": "Cargo del responsable a bordo. Puede ser 'capitan' abreviado con c. o cap., 'piloto'abreviado con pil. o 'patrón' abreviado con p. o pat.",
      "nullable": true,
      "for_cleaning":["accepted_abbreviations", "accepted_idem"]
    },
    "master_name": {
      "type": "string",
      "description": "Nombre del responsable a bordo.",
      "nullable": true
    },
    "broker_name": {
      "type": "string",
      "description": "Nombre del agente marítimo.",
      "nullable": true
    },
    "cargo_list": {
      "type": "array",
      "description": "Lista de mercancías transportadas y sus propietarios.",
      "nullable": false,
      "items": {
        "type": "object",
        "properties": {
          "cargo_merchant_name": {
            "type": "string",
            "description": "Es el propietario de la carga o aquella persona a quien dicha carga va destinada.",
            "nullable": true
          },
          "cargo": {
            "type": "array",
            "description": "Lista de mercancías transportadas.",
            "nullable": false,
            "items": {
              "type": "object",
              "properties": {
                "cargo_quantity": {
                  "type": "number",
                  "description": "Representa la cantidad total de la carga en forma numérica. Se expresa como cadena de caracteres para evitar errores en el JSON si en la cantidad figuran letras en lugar de números debido a errores tipográficos o de transcripció del OCR. Si en la transcrición indicara, por ejemplo '2I pipas aceite', en este campo deberá trasladarse el valor 2I. Si el número no está presente, debe asignarse el valor null.",
                  "nullable": true
                },
                "cargo_unit": {
                  "type": "string",
                  "description": "Expresa las unidades de medida en las que la carga aparece. Ejemplo: 'cargo_unit': 'cj', 'cargo_unit':'barriles', 'cargo_unit': 'id'",
                  "nullable": true,
                  "for_cleaning":["accepted_abbreviations", "accepted_idem"]
                },
                "cargo_commodity": {
                  "type": "string",
                  "description": "Expresa los distintos productos o tipos de mercancías que transporta el buque. Ejemplo: 'cargo_commodity': 'cristales', 'cargo_commodity': 'id', 'cargo_commodity': 'vino'",
                  "nullable": true,
                  "for_cleaning":["accepted_abbreviations", "accepted_idem"]
                }
              },
              "required": ["cargo_quantity", "cargo_unit", "cargo_commodity"],
              "additionalProperties": false
            }
          }
        },
        "required": ["cargo_merchant_name", "cargo"],
        "additionalProperties": false
      }
    },
    "quarantine": {
      "type": "boolean",
      "description": "Información relativa a la existencia de condiciones especiales de la llegada motivadas por circunstancias sanitarias que imponen la cuarentena.",
      "nullable": true
    },
    "forced_arrival": {
      "type": "boolean",
      "description": "Información sobre la llegada al puerto debido a causas imprevistas, como un arribo forzoso por temporal, avería u otras emergencias.",
      "nullable": true
    },
    "obs": {
      "type": "string",
      "description": "Notas o comentarios adicionales que aborden aspectos no contemplados en las variables registradas, proporcionando información contextual o relevante sobre el evento.",
      "nullable": true,
      "for_cleaning":["accepted_paragraphs."]
    }
  },
  "required": [
    "travel_departure_date",
    "travel_arrival_date",
    "travel_departure_port",
    "travel_port_of_call_list",
    "ship_type",
    "ship_name",
    "ship_tons_capacity",
    "ship_tons_units",
    "ship_flag",
    "master_role",
    "master_name",
    "broker_name",
    "cargo_list",
    "quarantine",
    "forced_arrival",
    "obs"
  ],
  "additionalProperties": false
}